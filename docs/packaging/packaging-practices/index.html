<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-packaging/packaging-practices">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Packaging Practices | Solus Help Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://help.getsol.us/img/logo.jpg"><meta data-rh="true" name="twitter:image" content="https://help.getsol.us/img/logo.jpg"><meta data-rh="true" property="og:url" content="https://help.getsol.us/docs/packaging/packaging-practices"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Packaging Practices | Solus Help Center"><meta data-rh="true" name="description" content="The primary goal of ypkg is ease of maintenance. In order to do so we ensure packages in the binary repository adhere to a strict set of conventions and practices."><meta data-rh="true" property="og:description" content="The primary goal of ypkg is ease of maintenance. In order to do so we ensure packages in the binary repository adhere to a strict set of conventions and practices."><link data-rh="true" rel="icon" href="/img/support-icon-2.svg"><link data-rh="true" rel="canonical" href="https://help.getsol.us/docs/packaging/packaging-practices"><link data-rh="true" rel="alternate" href="https://help.getsol.us/docs/packaging/packaging-practices" hreflang="en"><link data-rh="true" rel="alternate" href="https://help.getsol.us/docs/packaging/packaging-practices" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2e6f6ab5.css">
<link rel="preload" href="/assets/js/runtime~main.3ce315df.js" as="script">
<link rel="preload" href="/assets/js/main.5b574562.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Solus Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Solus Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Solus</b></a><a class="navbar__item navbar__link" href="/docs/user/intro">Help Center Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/packaging/">Packaging</a><a href="https://getsol.us/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://getsol.us" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">getsol.us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/">Prepare for Packaging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/eopkg-configuration">Eopkg Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/local-repository">Local Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/package.yml">Package YAML</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/packaging/packaging-practices">Packaging Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/procedures">Procedures</a><button aria-label="Toggle the collapsible sidebar category &#x27;Procedures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/submitting-a-package">Submitting the Package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/packaging/updating-an-existing-package">Updating an Existing Package</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Packaging Practices</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Packaging Practices</h1><p>The primary goal of <code>ypkg</code> is ease of maintenance. In order to do so we ensure packages in the binary repository adhere to a strict set of conventions and practices.</p><p>The next few sections will detail these.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="package-naming">Package naming<a href="#package-naming" class="hash-link" aria-label="Direct link to Package naming" title="Direct link to Package naming">​</a></h2><p>The <code>ypkg</code> tool does not allow for custom subpackages or subpackage naming, and will enforce its own policy. This can be eased somewhat through the use of <code>patterns</code>, however the available subpackage names are limited.</p><p>We request you use (where possible) the upstream source name for your package. Subpackage names (when generated) are constructed by using the <code>name</code> value first, then applying the subpackage name as such:</p><p><code>pkgname-$subpackage</code></p><p>Subpackages are fully automatic with <code>ypkg</code>, and are created based on file patterns. All subpackages automatically depend on the main package, to ensure correct operation. In the following explanations, <code>$lib</code> is used to refer to the host library directory, i.e. <code>lib</code> or <code>lib64</code> (or <code>lib32</code> on <code>emul32</code> builds).</p><p>For the libraries / packages of the following programming languages, you should typically use the following template for it.</p><table><thead><tr><th>Language</th><th>Prefix</th><th>Example</th></tr></thead><tbody><tr><td>Haskell</td><td><code>haskell-</code></td><td><code>text-binary</code> would be <code>haskell-text-binary</code></td></tr><tr><td>Perl</td><td><code>perl-</code></td><td><code>algorithm-diff</code> would be <code>perl-algorithm-diff</code></td></tr><tr><td>Python</td><td><code>python-</code></td><td><code>wikipedia</code> would be <code>python-wikipedia</code> <strong>even if only Python3 is enabled</strong></td></tr><tr><td>Ruby</td><td><code>ruby-</code></td><td><code>gssapi</code> would be <code>ruby-gssapi</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-devel-subpackage">The devel subpackage<a href="#the-devel-subpackage" class="hash-link" aria-label="Direct link to The devel subpackage" title="Direct link to The devel subpackage">​</a></h3><p>This is invariably created for packages that provide libraries and development headers. The following rules will result in files being placed in a <code>devel</code> subpackage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/include</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/$lib/lib*.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/$lib/lib*.a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/man2/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/man3/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/pkgconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/$lib/pkgconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/cmake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/vala</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that for some packages, <code>/usr/$lib/lib*.so</code> files are not symlinks. In this instance, the main package will be broken with no library files present. This can quickly be determined by looking at the resulting .xml file generated after running the build.
If this happens, simply override with <code>patterns</code> or set <code>libsplit</code> to “no”.</p><p><strong>A note on static archives</strong>: Unless it is absolutely unavoidable, you should disable static libraries within your build. This is usually fixed by adding <code>--disable-static</code> to your configure routine. If <code>*.a</code> files are shown in your packaging request, it will be
questioned, as they can pose a greater security risk if packages link against these static archives.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-docs-subpackage">The docs subpackage<a href="#the-docs-subpackage" class="hash-link" aria-label="Direct link to The docs subpackage" title="Direct link to The docs subpackage">​</a></h3><p>Currently there is only one pattern which is forced into a <code>docs</code> subpackage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/gtk-doc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If required, you can use <code>patterns</code> to move other files into the <code>docs</code> subpackage, making it smaller.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-32bit-subpackage">The 32bit subpackage<a href="#the-32bit-subpackage" class="hash-link" aria-label="Direct link to The 32bit subpackage" title="Direct link to The 32bit subpackage">​</a></h3><p>This subpackage is only generated during an <code>emul32</code> build. The following paths will automatically be placed into a <code>32bit</code> subpackage</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib32/lib*.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib32/lib*.so.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/lib32/lib*.a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note the same static archive rules apply to <code>32bit</code> packages. These packages aren’t as heavily split as we try to discourage their use, though they must be provided in some instances.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-utils-subpackage">The utils subpackage<a href="#the-utils-subpackage" class="hash-link" aria-label="Direct link to The utils subpackage" title="Direct link to The utils subpackage">​</a></h3><p>This is not an automatic subpackage, you must use <code>patterns</code> to utilise it. It is provided for instances that it may not be suitable to have binaries present, i.e. for a library package.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="maintenance">Maintenance<a href="#maintenance" class="hash-link" aria-label="Direct link to Maintenance" title="Direct link to Maintenance">​</a></h2><p>When submitting a change <code>package.yml</code>, it must be accompanied by its corresponding <code>pspec_*.xml</code> file, which was generated at build time. This machine file allows the repository maintainers to evaluate the package condition.</p><p>When providing a new version of a package, or a fix, always ensure you increment the <code>release</code> number by 1. This ensures that users of your package are correctly updated to the latest version.</p><p>Never submit a package without having first tested it, and ensuring it builds within <code>solbuild</code>, a clean chroot environment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="generating-a-packageyml">Generating a Package.yml<a href="#generating-a-packageyml" class="hash-link" aria-label="Direct link to Generating a Package.yml" title="Direct link to Generating a Package.yml">​</a></h2><p>Making a package.yml file is not necessarily a manual process. In fact, <a href="/docs/packaging">once you have common setup</a>, you already have a script capable of generating a package.yml file based
on the source archive URL.</p><p>You can generate a package.yml by using <code>common/Scripts/yauto.py URL_TO_ARCHIVE</code>. We recommend creation an alias in your <code>.bashrc</code> or <code>.zshrc</code>, so you can access it wherever you are. For example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fetchYml</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$HOME</span><span class="token string" style="color:#e3116c">/repository/common/Scripts/yauto.py&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="licenses">Licenses<a href="#licenses" class="hash-link" aria-label="Direct link to Licenses" title="Direct link to Licenses">​</a></h2><p>All new packages or updates to packages should abide by the <a href="https://spdx.org/licenses/" target="_blank" rel="noopener noreferrer">SPDX 3.x</a> definitions, with the following policy:</p><ul><li><code>-only</code> licenses, such as <code>GPL-2.0-only</code>, should <strong>only be declared</strong> as such when the upstream explicitly states &quot;only&quot;, otherwise it should always be <code>-or-later</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="patching--extra-files">Patching / extra files<a href="#patching--extra-files" class="hash-link" aria-label="Direct link to Patching / extra files" title="Direct link to Patching / extra files">​</a></h2><p>Files that may be required during the build can be accessed via the <code>$pkgfiles</code> variable. Note that you must store your files in the <code>./files</code> directory relative to your <code>package.yml</code></p><p>Both patches and extra files (such as systemd units) are stored in this directory. Note that if your patch is to address a <strong>CVE</strong>, you must use the following naming scheme: <code>./files/security/cve-xxxx-xxxx.patch</code></p><p>Where <code>xxxx-xxxx</code> is replaced with the full CVE ID. Complying with this simple rule ensures that we can know at any time the security status of packages when using tools such as <code>cve-check-tool</code></p><p>Solus tooling allows the use of <code>./files/security/cve-xxxx-xxxx.nopatch</code> (which isn&#x27;t applied in the build) to indicate that a CVE has been validated as not applicable to the Solus package. This can be because another patch resolves this CVE, or there is a false positive via <code>cve-check-tool</code>. The contents of the file can describe why it doesn&#x27;t apply without requiring a patch (i.e. Resolved by cve-xxxx-xxxx.patch).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="applying-a-patch">Applying a patch<a href="#applying-a-patch" class="hash-link" aria-label="Direct link to Applying a patch" title="Direct link to Applying a patch">​</a></h3><p>It is common practice to apply the patch within the <code>setup</code> section of your build staging. We can achieve this using the <code>%patch</code> macro, and the <code>$pkgfiles</code> variable. In this example, the required file is located
at <code>./files/0002-Sample-commit-2.patch</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">%patch -p1 -i </span><span class="token variable" style="color:#36acaa">$pkgfiles</span><span class="token plain">/0002-Sample-commit-2.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note you use the macro as you would normally use the patch command, however use of the macro ensures it performs a clean batch-mode patch.</p><p>If you are using compressed patches, i.e. for the <code>bash</code> or <code>readline</code> packages, you can pipe the call through <code>zcat</code> or similar:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">zcat </span><span class="token variable" style="color:#36acaa">$pkgfiles</span><span class="token plain">/bash43-032.gz </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> %patch -p0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="handling-multiple-patches">Handling multiple patches<a href="#handling-multiple-patches" class="hash-link" aria-label="Direct link to Handling multiple patches" title="Direct link to Handling multiple patches">​</a></h4><p>In the event you need to apply multiple patches, such as a multitude of CVE patches, it may be sensible to use our <code>%apply_patches</code> macro, which will apply all the patches listed in a <code>series</code> file in your package&#x27;s <code>./files</code> folder. Example below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">security/cve-xxxx-xxxx.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fix-silliness.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Both of the files above will be applied using <code>-p1</code>. If you need to use stripping num, like <code>-p4</code>, you can do something like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">security/cve-xxxx-xxxx.patch -p4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fix-silliness.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-extra-files">Installing extra files<a href="#installing-extra-files" class="hash-link" aria-label="Direct link to Installing extra files" title="Direct link to Installing extra files">​</a></h2><p>We recommend using patches where possible first, as they ensure correct maintenance and will be updated across package versions. If you must install extra files into the directory, please use the <code>install</code>
command, ensuring you set the correct permissions. Again, files are accessible from the <code>./files/</code> directory, relative to <code>package.yml</code>.</p><p>This is an example of installing a custom profile file, seen in the <code>bash</code> package:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -m 0644 </span><span class="token variable" style="color:#36acaa">$pkgfiles</span><span class="token plain">/profile </span><span class="token variable" style="color:#36acaa">$installdir</span><span class="token plain">/etc/profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-dependencies">Build dependencies<a href="#build-dependencies" class="hash-link" aria-label="Direct link to Build dependencies" title="Direct link to Build dependencies">​</a></h2><p>Most software packages that you build will in one way or another, depend on another software package to provide specific functionality. This is usually achieved by using a library.</p><p>Any package that is submitted to our repositories is always built in a clean chroot environment, therefore any dependencies required to build that package in a reproducible and sane fashion, must be listed.</p><p>This is achieved by populating the <code>builddeps</code> key with a list of build dependencies. We support two kinds of build dependencies: explicitly named, or <code>pkgconfig</code> dependencies.</p><p>We prefer the use of <code>pkgconfig</code> dependencies. Most modern software will use the <code>pkg-config</code> tool (package configuration) to determine which files are required to build the current software. This may include
compiler flags, library to link against and where the package headers are located.</p><p>An obvious advantage to supporting <code>pkgconfig</code> dependencies is that there is a 1:1 mapping between the name requested by the build and the name used within the <code>package.yml</code>. Instead of trying to hunt down
the package providing that dependency, you simply list the same name. Any package in the repository will export information about the <code>.pc</code> files (for <code>pkg-config</code>) it contains, enabling you to use those as a build dependency.</p><p>A secondary advantage is that this allows for easily switching or replacing a providing package. When no <code>pkgconfig</code> name is available (some packages do not provide these, or it doesn’t make sense for them to), you
may use the explicit package name. Always ensure you select the correct package, i.e. the <code>-devel</code> subpackage. This provides the necessary symlinks and headers to build packages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-pkgconfig-dependencies">Using pkgconfig dependencies<a href="#using-pkgconfig-dependencies" class="hash-link" aria-label="Direct link to Using pkgconfig dependencies" title="Direct link to Using pkgconfig dependencies">​</a></h3><p>In the <code>builddeps</code> list, simply use the <code>pkgconfig(name)</code> syntax. For example, to add gtk+-3.0 to the build dependencies, we would do the following:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">builddeps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pkgconfig(gtk+</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">3.0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At build time the appropriate provider package is selected, in this instance <code>libgtk-3-devel</code></p><p>You can determine if there are pkgconfigs available from a -devel package by doing <code>eopkg info (name)</code> and looking for the <code>Provides</code> key.</p><p>Example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ eopkg info libgtk-3-devel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In output:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Provides: pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtk+-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdk-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdk-wayland-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gail-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdk-x11-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtk+-unix-print-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtk+-wayland-3.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> pkgconfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtk+-x11-3.0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to do a reverse process and figure out what package is part of pkgconfig you can use:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">common/Scripts/epcsearch.py NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-explicit-named-dependencies">Using explicit named dependencies<a href="#using-explicit-named-dependencies" class="hash-link" aria-label="Direct link to Using explicit named dependencies" title="Direct link to Using explicit named dependencies">​</a></h3><p>As may be obvious, simply list the package name. Note we discourage this when a <code>pkgconfig</code> dependency is available.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">builddeps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">devel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="runtime-dependencies">Runtime dependencies<a href="#runtime-dependencies" class="hash-link" aria-label="Direct link to Runtime dependencies" title="Direct link to Runtime dependencies">​</a></h2><p>Runtime dependencies are extra packages that a package needs in order to function correctly. A common example of this is other libraries. Solus <code>eopkg</code> packages will automatically add any binary dependencies at
runtime, so that you do not have to.</p><p>All <code>devel</code> subpackages automatically depend on their parent package. On top of this, if they provide a <code>.pc</code> pkg-config file, we export this information, and automatically determine the packages this particular
package would need to be able to build against correctly. As such, the majority of dependencies for builds are automatically resolved.</p><p>In certain instances, binary dependencies aren’t enough. An example of this might be an extra Python package, or a font, something that is not accounted for by binary checks.</p><p>To account for this, you may add extra explicit runtime dependencies to your package. These are taken from the optional <code>rundeps</code> ypkg key.</p><p>This key uses the <code>dict(s)</code> type, and the default key is the current package <code>name</code>. You may express a different subpackage to apply dependencies to by using that name as a key, i.e. <code>devel</code>, or <code>docs</code>.</p><p>This would add the “python-gobject” runtime dependency to the main package:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rundeps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - python-gobject</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This would add the same dependency, as well as adding it to the <code>devel</code> subpackage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rundeps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - python-gobject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - devel: python-gobject</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remember this uses the <code>dict(s)</code> type, which is very flexible. You can equally express this as follows (adding more deps as an example):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rundeps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - python-gobject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - devel:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - somepackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - someotherpackage</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="patterns">Patterns<a href="#patterns" class="hash-link" aria-label="Direct link to Patterns" title="Direct link to Patterns">​</a></h2><p>In most instances, <code>ypkg</code> will assign the correct location for files, whether it be in the main <code>name</code> package, or a subpackage. However there may be instances where the default does not match the intended behaviour.</p><p>In these instances it is possible to override the default assignment by way of patterns. These are simply a list of paths or globs to ensure a particular file, or set of files, end up in the desired location.</p><p>The <code>patterns</code> key expects a <code>dict(s)</code> argument. The default key for each pattern is assumed to be the <code>name</code> of the package, so omitting the name would place files into the main package. The value should be a
path or pattern you wish to match, ensuring files go to a specific location.</p><p>In this example from libjpeg-turbo, we move all documentation into the <code>docs</code> subpackage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">patterns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - docs: [/usr/share/man]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This example, taken from the wayland package, ensures the binaries from <code>/usr/bin</code> and the <code>/usr/share/wayland</code> are located in the <code>devel</code> subpackage:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">patterns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - devel:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - /usr/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - /usr/share/wayland</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="replace--rename">Replace / rename<a href="#replace--rename" class="hash-link" aria-label="Direct link to Replace / rename" title="Direct link to Replace / rename">​</a></h2><p>In some situations, it may be required to replace one package with another, or to rename an existing package. In these instances you should coordinate with a repository maintainer to ensure the replaced package is
marked <strong>Obsolete</strong> within the index. This will ensure correct upgrade paths for users.</p><p>Note that to retire a package, you must also coordinate with a repository maintainer. An <strong>Obsolete</strong> package is removed by the package manager when the user upgrades. As such, correct upgrade paths need to be
established.</p><p>The <code>replaces</code> ypkg key uses the <code>dict(s)</code> type, and the default key is assumed to be the current package <code>name</code>.</p><p>In this example, we rename the <code>libgeoclue*</code> packages to use the correct names, and ensure a working upgrade path.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">replaces:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - devel: libgeoclue-devel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - libgeoclue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>name</code> of this package is <strong>geoclue</strong>, and the new package names are now:</p><ul><li>geoclue</li><li>geoclue-devel</li></ul><p>Given the <code>replaces</code> values above, <strong>geoclue</strong> now replaces <strong>libgeoclue</strong>, and <strong>geoclue-devel</strong> replaces <strong>libgeoclue-devel</strong>. This is entirely transparent to the user, with a seamless update replacing the old
packages with the new renamed packages.</p><p>The repository maintainer marked the old names as <strong>Obsolete</strong> in the index.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/getsolus/help-center-docs/tree/master/docs/packaging/packaging-practices.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-14T15:21:57.000Z">Aug 14, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/packaging/package.yml"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Package YAML</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/procedures"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Procedures</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#package-naming" class="table-of-contents__link toc-highlight">Package naming</a><ul><li><a href="#the-devel-subpackage" class="table-of-contents__link toc-highlight">The devel subpackage</a></li><li><a href="#the-docs-subpackage" class="table-of-contents__link toc-highlight">The docs subpackage</a></li><li><a href="#the-32bit-subpackage" class="table-of-contents__link toc-highlight">The 32bit subpackage</a></li><li><a href="#the-utils-subpackage" class="table-of-contents__link toc-highlight">The utils subpackage</a></li></ul></li><li><a href="#maintenance" class="table-of-contents__link toc-highlight">Maintenance</a></li><li><a href="#generating-a-packageyml" class="table-of-contents__link toc-highlight">Generating a Package.yml</a></li><li><a href="#licenses" class="table-of-contents__link toc-highlight">Licenses</a></li><li><a href="#patching--extra-files" class="table-of-contents__link toc-highlight">Patching / extra files</a><ul><li><a href="#applying-a-patch" class="table-of-contents__link toc-highlight">Applying a patch</a></li></ul></li><li><a href="#installing-extra-files" class="table-of-contents__link toc-highlight">Installing extra files</a></li><li><a href="#build-dependencies" class="table-of-contents__link toc-highlight">Build dependencies</a><ul><li><a href="#using-pkgconfig-dependencies" class="table-of-contents__link toc-highlight">Using pkgconfig dependencies</a></li><li><a href="#using-explicit-named-dependencies" class="table-of-contents__link toc-highlight">Using explicit named dependencies</a></li></ul></li><li><a href="#runtime-dependencies" class="table-of-contents__link toc-highlight">Runtime dependencies</a></li><li><a href="#patterns" class="table-of-contents__link toc-highlight">Patterns</a></li><li><a href="#replace--rename" class="table-of-contents__link toc-highlight">Replace / rename</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/user/intro">Welcome</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discuss.getsol.us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://matrix.to/#/#solus:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/SolusProject" target="_blank" rel="me" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fosstodon.org/@Solus" target="_blank" rel="me" class="footer__link-item">Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://getsol.us/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/getsolus" target="_blank" rel="me" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://dev.getsol.us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Solus Project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3ce315df.js"></script>
<script src="/assets/js/main.5b574562.js"></script>
</body>
</html>