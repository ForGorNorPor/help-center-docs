"use strict";(self.webpackChunksolus_help_center=self.webpackChunksolus_help_center||[]).push([[5705],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>g});var r=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,a=function(e,t){if(null==e)return{};var o,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,a=e.mdxType,n=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(o),d=a,g=c["".concat(p,".").concat(d)]||c[d]||m[d]||n;return o?r.createElement(g,i(i({ref:t},u),{},{components:o})):r.createElement(g,i({ref:t},u))}));function g(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=o.length,i=new Array(n);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<n;s++)i[s]=o[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},5069:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>n,metadata:()=>l,toc:()=>s});var r=o(7462),a=(o(7294),o(3905));const n={title:"Diff to Pull Request",summary:"How to make your Phabricator diff a GitHub Pull Request"},i="Open Diffs",l={unversionedId:"packaging/procedures/diff-to-pull-request",id:"packaging/procedures/diff-to-pull-request",title:"Diff to Pull Request",description:"All but a few open package diffs on Phabricator were merged before the migration to GitHub. But what about the ones that weren't merged? Luckily, it should be a pretty straightforward process to turn your changes into a Pull Request on GitHub.",source:"@site/docs/packaging/procedures/diff-to-pull-request.md",sourceDirName:"packaging/procedures",slug:"/packaging/procedures/diff-to-pull-request",permalink:"/docs/packaging/procedures/diff-to-pull-request",draft:!1,editUrl:"https://github.com/getsolus/help-center-docs/tree/master/docs/packaging/procedures/diff-to-pull-request.md",tags:[],version:"current",lastUpdatedAt:1695049983,formattedLastUpdatedAt:"Sep 18, 2023",frontMatter:{title:"Diff to Pull Request",summary:"How to make your Phabricator diff a GitHub Pull Request"},sidebar:"packagingSidebar",previous:{title:"Procedures",permalink:"/docs/category/procedures"},next:{title:"Maintainership",permalink:"/docs/packaging/procedures/maintainership"}},p={},s=[{value:"Setup",id:"setup",level:2},{value:"Moving Your Commit",id:"moving-your-commit",level:2},{value:"Creating a Pull Request",id:"creating-a-pull-request",level:2}],u={toc:s},c="wrapper";function m(e){let{components:t,...o}=e;return(0,a.kt)(c,(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"open-diffs"},"Open Diffs"),(0,a.kt)("p",null,"All but a few open package diffs on Phabricator were merged before the migration to GitHub. But what about the ones that weren't merged? Luckily, it should be a pretty straightforward process to turn your changes into a Pull Request on GitHub."),(0,a.kt)("p",null,"This article will use our ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/solus-packages/bottom"},"Bottom")," package as an example."),(0,a.kt)("p",null,"To make the process even easier, we recommend installing ",(0,a.kt)("inlineCode",{parentName:"p"},"github-cli")," (",(0,a.kt)("inlineCode",{parentName:"p"},"sudo eopkg it github-cli"),") to make working with GitHub a breeze."),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("p",null,"It would be a good idea to change the name of the directory to avoid a naming conflict when you fork and clone the new repository."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/solus-builds # Change this to wherever your package packaging directory is\nmv bottom bottom-old\n")),(0,a.kt)("p",null,"The first step will be to fork the new GitHub repo. You can do this via GitHub's website, or via the command line. We'll use the command line here to help streamline the process."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"gh repo fork --clone solus-packages/bottom\n")),(0,a.kt)("p",null,"This will create a fork of the Solus package under your user, in my case ",(0,a.kt)("inlineCode",{parentName:"p"},"EbonJaeger/bottom"),". The command will also create a remote called ",(0,a.kt)("inlineCode",{parentName:"p"},"upstream")," pointing to the repository in the ",(0,a.kt)("inlineCode",{parentName:"p"},"solus-packages")," organization to make updating your copy easier, and the ",(0,a.kt)("inlineCode",{parentName:"p"},"--clone")," option clones the fork to your disk."),(0,a.kt)("h2",{id:"moving-your-commit"},"Moving Your Commit"),(0,a.kt)("p",null,"Now to move your committed changes from the old repo to the new. Let's create a new branch in the newly cloned repository to work in. While not strictly necessary, it's a good practice to get in the habit of doing."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd bottom\ngit switch -c example-package-bump\n")),(0,a.kt)("p",null,"Next, extract your commit from your old copy of the repository using ",(0,a.kt)("inlineCode",{parentName:"p"},"git format-patch"),". Replace ",(0,a.kt)("inlineCode",{parentName:"p"},"bottom-old")," below with the directory of your old repo."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git --git-dir=../bottom-old/.git format-patch -k -1 --stdout HEAD | git am -3 -k\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Breakdown:")," This will take the latest commit from the repository passed to the ",(0,a.kt)("inlineCode",{parentName:"p"},"--git-dir")," option as a patch, send it to ",(0,a.kt)("em",{parentName:"p"},"stdout"),", and is applied to the current repository by piping it to ",(0,a.kt)("inlineCode",{parentName:"p"},"git am"),", falling back to a three-way-merge if for some reason there is a merge conflict when applying the patch.")),(0,a.kt)("p",null,"Once this is complete, you can verify the operation with ",(0,a.kt)("inlineCode",{parentName:"p"},"git status")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"git log")," to see that the commit was applied."),(0,a.kt)("p",null,"Push the commit to your fork on GitHub with ",(0,a.kt)("inlineCode",{parentName:"p"},"git push"),"."),(0,a.kt)("h2",{id:"creating-a-pull-request"},"Creating a Pull Request"),(0,a.kt)("p",null,"You can now open a Pull Request as normal. This can be done from the website or from the command line:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"gh pr create --repo solus-packages/bottom\n")))}m.isMDXComponent=!0}}]);