"use strict";(self.webpackChunksolus_help_center=self.webpackChunksolus_help_center||[]).push([[1942],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),c=u(a),g=i,m=c["".concat(s,".").concat(g)]||c[g]||d[g]||o;return a?n.createElement(m,l(l({ref:t},p),{},{components:a})):n.createElement(m,l({ref:t},p))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,l=new Array(o);l[0]=g;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[c]="string"==typeof e?e:i,l[1]=r;for(var u=2;u<o;u++)l[u]=a[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},2634:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>u});var n=a(7462),i=(a(7294),a(3905));const o={title:"Prepare for Packaging",summary:"Quick guide on getting your system set up for packaging on Solus",sidebar_position:0},l=void 0,r={unversionedId:"packaging/index",id:"packaging/index",title:"Prepare for Packaging",description:"We are currently in the process of migrating our source repositories from Phabricator to GitHub. Updating all facets of the documentation will take some time.",source:"@site/docs/packaging/index.md",sourceDirName:"packaging",slug:"/packaging/",permalink:"/docs/packaging/",draft:!1,editUrl:"https://github.com/getsolus/help-center-docs/tree/master/docs/packaging/index.md",tags:[],version:"current",lastUpdatedAt:1693002383,formattedLastUpdatedAt:"Aug 25, 2023",sidebarPosition:0,frontMatter:{title:"Prepare for Packaging",summary:"Quick guide on getting your system set up for packaging on Solus",sidebar_position:0},sidebar:"packagingSidebar",next:{title:"Creating a New Package",permalink:"/docs/packaging/creating-a-new-package"}},s={},u=[{value:"Setting up Packager file",id:"setting-up-packager-file",level:2},{value:"Installing Development Tools",id:"installing-development-tools",level:2},{value:"Setting up a GitHub account",id:"setting-up-a-github-account",level:2},{value:"Setting Up solbuild",id:"setting-up-solbuild",level:2},{value:"Initializing solbuild",id:"initializing-solbuild",level:3},{value:"Updating solbuild",id:"updating-solbuild",level:3},{value:"Setting up a Build Directory",id:"setting-up-a-build-directory",level:2},{value:"Setting up <code>common</code>",id:"setting-up-common",level:3},{value:"Building Packages",id:"building-packages",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...a}=e;return(0,i.kt)(c,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"We are currently in the process of migrating our source repositories from Phabricator to GitHub. Updating all facets of the documentation will take some time.\nIf you notice any issues feel free to file an issue or get in contact with us on our Matrix channels.")),(0,i.kt)("h1",{id:"prepare-for-packaging"},"Prepare for Packaging"),(0,i.kt)("h2",{id:"setting-up-packager-file"},"Setting up Packager file"),(0,i.kt)("p",null,"In order to utilise the build system, you must first set up a configuration file that has your packager details."),(0,i.kt)("p",null,"This file lives in the ",(0,i.kt)("inlineCode",{parentName:"p"},".config/solus")," folder of your home directory. You will need to create the ",(0,i.kt)("inlineCode",{parentName:"p"},".config/solus")," folder as well as the inner ",(0,i.kt)("inlineCode",{parentName:"p"},"packager")," file. Inside the packager file, you need two keys, ",(0,i.kt)("inlineCode",{parentName:"p"},"Name")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Email"),". This is used when generating the machine file so that the packager details are stored within the resulting binary package."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[Packager]\nName=Your Name Here\nEmail=your.email@address\n")),(0,i.kt)("h2",{id:"installing-development-tools"},"Installing Development Tools"),(0,i.kt)("p",null,"We need to install a few things in order to get started with packaging.\nThe main packages we need are provided by the ",(0,i.kt)("inlineCode",{parentName:"p"},"system.devel")," component."),(0,i.kt)("p",null,"Namely:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ypkg")," the program that actually builds packages"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"make")," used by our build tools for scripting")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo eopkg it -c system.devel\n")),(0,i.kt)("p",null,"Additionally, we need a few more tools to carry out the packaging process:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git")," is used for version control of the solus sources"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"solbuild")," is a lightweight container environment for building packages repeatably"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"solbuild-config-unstable")," sets up solbuild for working with the ",(0,i.kt)("inlineCode",{parentName:"li"},"unstable")," repository")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo eopkg it git solbuild solbuild-config-unstable\n")),(0,i.kt)("h2",{id:"setting-up-a-github-account"},"Setting up a GitHub account"),(0,i.kt)("p",null,"The solus source repositories for the package repository currently reside on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/solus-packages"},"github.com/solus-packages"),". You will need a GitHub account to submit patches and file issues. You can create a GitHub account ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/signup"},"here"),"."),(0,i.kt)("h2",{id:"setting-up-solbuild"},"Setting Up solbuild"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"solbuild")," tool must first be initialized with a base image. All builds thereafter will use this as a base, and construct a temporary overlay root to save on time and disk space in builds."),(0,i.kt)("h3",{id:"initializing-solbuild"},"Initializing solbuild"),(0,i.kt)("p",null,"Next, you need to initialize solbuild via:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo solbuild init\n")),(0,i.kt)("p",null,"This will take some time as it downloads and prepares the image."),(0,i.kt)("h3",{id:"updating-solbuild"},"Updating solbuild"),(0,i.kt)("p",null,"It is a good idea to keep the base image updated. It will help reduce build times by not having to repeatedly download updates to packages in the base image, and will strictly need to pull down the packages your build needs."),(0,i.kt)("p",null,"To update solbuild, run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo solbuild update\n")),(0,i.kt)("h2",{id:"setting-up-a-build-directory"},"Setting up a Build Directory"),(0,i.kt)("p",null,"Create a build directory to hold sub-directories with packaging files. Here we are using the name ",(0,i.kt)("inlineCode",{parentName:"p"},"solus-builds")," and placing it in our home directory, but you can use whatever you prefer."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir ~/solus-builds\ncd solus-builds\n")),(0,i.kt)("h3",{id:"setting-up-common"},"Setting up ",(0,i.kt)("inlineCode",{parentName:"h3"},"common")),(0,i.kt)("p",null,"Next you need to set up ",(0,i.kt)("inlineCode",{parentName:"p"},"common"),", a set of scripts that enables you to manage, build, check, and publish packages."),(0,i.kt)("p",null,"Run the following commands to clone the ",(0,i.kt)("inlineCode",{parentName:"p"},"common")," repository and create the required symlinks. Do this inside ",(0,i.kt)("inlineCode",{parentName:"p"},"solus-builds"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/getsolus/common.git\nln -sv common/Makefile.common .\nln -sv common/Makefile.toplevel Makefile\nln -sv common/Makefile.iso .\n")),(0,i.kt)("p",null,"Your folder should look something similar to this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u2514\u2500\u2500 solus-builds\n   \u251c\u2500\u2500 common\n   \u2502  \u251c\u2500\u2500 *lots of stuff, not shown here*\n   \u251c\u2500\u2500 Makefile -> common/Makefile.toplevel\n   \u251c\u2500\u2500 Makefile.common -> common/Makefile.common\n   \u2514\u2500\u2500 Makefile.iso -> common/Makefile.iso\n")),(0,i.kt)("h2",{id:"building-packages"},"Building Packages"),(0,i.kt)("p",null,"With your new build environment set up, you can now build packages."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/packaging/your-first-package"},"Your First Package")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/packaging/updating-an-existing-package"},"Updating an Existing Package")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/packaging/creating-a-new-package"},"Creating a New Package"))))}d.isMDXComponent=!0}}]);